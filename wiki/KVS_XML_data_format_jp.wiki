#summary KVS XML データ形式.
#sidebar table_of_contents_jp

<wiki:toc max_depth="3"/>

= KVS XML data format =

KVSが標準的に扱うオブジェクトデータ形式（XML形式）について説明する。KVSで扱うオブジェクトデータは、幾何形状データ（Geometry object data）とボリューム形状データ（Volume object data）に分類され、以下の５種類のデータを処理の対象としている。

 * 幾何形状データ
  * 点データ（Point object）
  * 線データ（Line object）
  * 面データ（Polygon object）

 * ボリューム形状データ
  * 構造格子データ（Structured volume object）
  * 非構造格子データ（Unstructured volume object）

それぞれのデータ形式について説明する。

== 点データ（point object） ==
点群を表す幾何データであり、頂点の座標値（coordinate）、色（color）、法線（normal）、点の大きさ（size）に関する情報を持つ。
{{{
<KVSML>
  <Object type="PointObject">
    <PointObject>
      <Vertex nvertices="xxx">
      <!-- nvertices: 頂点数 -->
        <Coord>
          <DataArray>
        </Coord>
        <Color>
          <DataArray> または <DataValue>
          <!-- * 各頂点に別の色を指定する場合                     -->
          <!--     <DataArray> r0 g0 b0 r1 g1 b1 ... </DataArray> -->
          <!-- * すべての頂点に同じ色を指定する場合               -->
          <!--     <DataValue> r g b </DataValue>                 -->
        </Color>
        <Normal>
          <DataArray>
        </Normal>
        <Size>
          <DataArray> または <DataValue>
        </Size>
      </Vertex>
    </PointObject>
  </Object>
</KVSML>
}}}

== 線データ（line Object） ==
線群を表す幾何データであり、頂点の座標値（coordinate）、線分または頂点の色（color）、線の太さ（size）、頂点の接続（connection）に関する情報を持つ。また、線の種類として、「線分（strip）」、「一本線（uniline）」、「複数線（polyline）」、「分割線（segment）」を表現できる。
{{{
<KVSML>
  <Object type="LineObject">
    <!-- aaa: strip, uniline, polyline, segment -->
    <!-- bbb: line, vertex -->
    <LineObject line_type="aaa" color_type="bbb">
      <Vertex nvertices="xxx">
        <Coord>
          <DataArray>
        </Coord>
        <Color>
          <DataArray> または <DataValue>
        </Color>
        <Size>
          <DataArray> または <DataValue>
        </Size>
      </Vertex>
      <Line nlines="xxx">
        <Connection>
          <DataArray>
        </Connection>
      </Line>
    </LineObject>
  </Object>
</KVSML>
}}}

== 面データ（polygon Object） ==
面（ポリゴン）を表す幾何データであり、頂点の座標値（coordinate）、ポリゴンまたは頂点の色（color）、ポリゴンの不透明度（opacity）、接続（connection）に関する情報を持つ。また、面の種類として三角形（triangle）または四角形（quadrangle）を表現できる。
{{{
<KVSML>
  <Object type="PolygonObject">
    <!-- aaa: triangle, quadrangle -->
    <!-- bbb: polygon, vertex -->
    <PolygonObject polygon_type="aaa" color_type="bbb">
      <Vertex nvertices="xxx">
        <Coord>
          <DataArray>
        </Coord>
        <Color>
          <DataArray> または <DataValue>
        </Color>
        <Normal>
          <DataArray>
        </Normal>
      </Vertex>
      <Polygon npolygons="xxx">
        <Connection>
          <DataArray>
        </Connection>
      </Polygon>
    </PolygonObject>
  </Object>
</KVSML>
}}}

== 構造型ボリュームデータ（structured volume object） ==

{{{
<KVSML>
  <Object type="StructuredVolumeObject">
    <!-- aaa: uniform, rectilinear, curvilinear -->
    <StructuredVolumeObject resolution="xxx xxx xxx" grid_type="aaa">
      <Node>
        <Value veclen="xxx">
          <DataArray>
        </Value>
      </Node>
    </StructuredVolumeObject>
  </Object>
</KVSML>
}}}

== 非構造型ボリュームデータ（unstructured volume object） ==

{{{
<KVSML>
  <Object type="UnstructuredVolumeObject">
    <!-- aaa: tetrahedra, quadratic tetrahedra, hexahedra, quadratic hexahedra -->
    <UnstructuredVolumeObject cell_type="aaa">
      <Node nnodes="xxx">
        <Value veclen="xxx">
          <DataArray>
        </Value>
        <Coord>
          <DataArray>
        </Coord>
      </Node>
      <Cell ncells="xxx">
        <Connection>
          <DataArray>
        </Connection>
      </Cell>
    </UnstructuredVolumeObject>
  </Object>
</KVSML>
}}}